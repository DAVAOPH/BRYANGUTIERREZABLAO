<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Life Update - Bryan Gutierrez Ablao</title>
  <link rel="icon" type="image/jpg" href="assets/profile.jpg" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    /* Styles same as your original (unchanged) */
    /* ... paste all the original <style> content here ... */
  </style>
</head>
<body>

<header>
  <div class="logo">
    <img src="assets/bryan.jpg" alt="Profile">
    <span>Bryan Gutierrez Ablao</span>
  </div>
  <div class="hamburger" onclick="toggleMenu()">☰</div>
  <nav id="nav">
    <a href="index.html">Profile</a>
    <a href="about.html">About Me</a>
    <a href="life.html">Life Update</a>
    <a href="contact.html">Contact Me</a>
  </nav>
</header>

<div class="layout">
  <aside>
    <div class="sidebar">
      <h3>Categories</h3>
      <ul class="category-list">
        <li data-category="home" class="active">🏠 Home</li>
        <li data-category="gallery">🖼️ Gallery</li>
        <li data-category="videos">🎬 Videos</li>
        <li data-category="favorite">⭐ Favorite</li>
      </ul>
    </div>
  </aside>

  <div class="container">
    <div class="section-title">Life Update</div>
    <p>Welcome to my life update section! Here you can share new events, milestones, or stories.</p>

    <div class="create-post" id="create-post">
      <h3>Create a New Post</h3>
      <input type="text" id="title" placeholder="Post Title">
      <textarea id="content" rows="5" placeholder="What's on your mind?"></textarea>
      <input type="file" id="fileInput" multiple />
      <button onclick="createPost()">➕ Post</button>
    </div>

    <div id="posts-container"></div>
  </div>
</div>

<script>
  let currentCategory = 'home';

  function toggleMenu() {
    document.getElementById('nav').classList.toggle('active');
  }

  function createPost() {
    const title = document.getElementById('title').value;
    const content = document.getElementById('content').value;
    const fileInput = document.getElementById('fileInput');
    const file = fileInput.files[0];

    if (!title || (!content && !file)) return alert('Please provide title and content or file.');

    let type = 'text', fileURL = '';
    if (file) {
      fileURL = URL.createObjectURL(file);
      const ext = file.name.split('.').pop().toLowerCase();
      if (['jpg', 'jpeg', 'png', 'gif'].includes(ext)) type = 'image';
      else if (['mp4', 'mov', 'avi'].includes(ext)) type = 'video';
    }

    const post = {
      id: Date.now(),
      title,
      content,
      fileURL,
      type,
      favorite: false
    };

    const posts = JSON.parse(localStorage.getItem('lifePosts') || '[]');
    posts.unshift(post);
    localStorage.setItem('lifePosts', JSON.stringify(posts));

    document.getElementById('title').value = '';
    document.getElementById('content').value = '';
    fileInput.value = '';
    renderPosts();
  }

  function deletePost(id) {
    let posts = JSON.parse(localStorage.getItem('lifePosts') || '[]');
    posts = posts.filter(p => p.id !== id);
    localStorage.setItem('lifePosts', JSON.stringify(posts));
    renderPosts();
  }

  function editPost(id) {
    const posts = JSON.parse(localStorage.getItem('lifePosts') || '[]');
    const post = posts.find(p => p.id === id);
    const newTitle = prompt('Edit title:', post.title);
    const newContent = prompt('Edit content:', post.content);
    if (newTitle && newContent) {
      post.title = newTitle;
      post.content = newContent;
      localStorage.setItem('lifePosts', JSON.stringify(posts));
      renderPosts();
    }
  }

  function toggleFavorite(id) {
    const posts = JSON.parse(localStorage.getItem('lifePosts') || '[]');
    const post = posts.find(p => p.id === id);
    post.favorite = !post.favorite;
    localStorage.setItem('lifePosts', JSON.stringify(posts));
    renderPosts();
  }

  function renderPosts() {
    const container = document.getElementById('posts-container');
    const posts = JSON.parse(localStorage.getItem('lifePosts') || '[]');

    const filtered = posts.filter(post => {
      if (currentCategory === 'gallery') return post.type === 'image';
      if (currentCategory === 'videos') return post.type === 'video';
      if (currentCategory === 'favorite') return post.favorite;
      return true; // home
    });

    container.innerHTML = filtered.map(p => `
      <div class="post">
        <div class="post-title">${p.title}</div>
        <div class="post-content">${p.content || ''}</div>
        ${p.fileURL && p.type === 'image' ? `<img src="${p.fileURL}" style="max-width:100%; border-radius:8px;" />` : ''}
        ${p.fileURL && p.type === 'video' ? `<video controls style="max-width:100%; border-radius:8px;"><source src="${p.fileURL}"></video>` : ''}
        ${currentCategory === 'home' ? `
          <div class="post-actions">
            <button onclick="editPost(${p.id})">📝 Edit</button>
            <button onclick="deletePost(${p.id})">❌ Delete</button>
            <button onclick="toggleFavorite(${p.id})">${p.favorite ? '💛 Unfavorite' : '⭐ Favorite'}</button>
          </div>` : ''}
      </div>
    `).join('');

    document.getElementById('create-post').style.display = currentCategory === 'home' ? 'block' : 'none';
  }

  document.querySelectorAll('.category-list li').forEach(item => {
    item.addEventListener('click', () => {
      document.querySelectorAll('.category-list li').forEach(li => li.classList.remove('active'));
      item.classList.add('active');
      currentCategory = item.getAttribute('data-category');
      renderPosts();
    });
  });

  window.onload = renderPosts;
</script>

</body>
</html>
