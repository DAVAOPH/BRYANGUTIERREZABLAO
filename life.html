<!DOCTYPE html>
<html lang="en">
<head>
   <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js"></script>
   <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-auth.js"></script>
   <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore.js"></script>
   <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-storage.js"></script>

   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
   <title>Life Update - Bryan Gutierrez Ablao</title>
   <link rel="icon" type="image/jpg" href="assets/profile.jpg" />
   <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
   <style>
     * {
       margin: 0;
       padding: 0;
       box-sizing: border-box;
     }

     html {
       font-size: 16px;
     }

     body {
       font-family: 'Poppins', sans-serif;
       background: linear-gradient(135deg, #e6ecff, #ffffff);
       color: #333;
       scroll-behavior: smooth;
     }

     header {
       background: #1d2b53;
       color: white;
       padding: 15px 25px;
       display: flex;
       justify-content: space-between;
       align-items: center;
       position: sticky;
       top: 0;
       z-index: 1000;
       flex-wrap: wrap;
     }

     .logo {
       display: flex;
       align-items: center;
       gap: 10px;
     }

     .logo img {
       width: 40px;
       height: 40px;
       border-radius: 8px;
     }

     .logo span {
       font-size: 1.2rem;
       font-weight: bold;
     }

     .hamburger {
       font-size: 1.8rem;
       cursor: pointer;
       display: none;
     }

     nav {
       display: flex;
       gap: 20px;
     }

     nav a {
       color: white;
       text-decoration: none;
       font-size: 1rem;
       position: relative;
     }

     nav a::after {
       content: "";
       position: absolute;
       width: 0;
       height: 2px;
       left: 0;
       bottom: -4px;
       background: white;
       transition: width 0.3s;
     }

     nav a:hover::after {
       width: 100%;
     }

     @media (max-width: 768px) {
       .hamburger {
         display: block;
       }

       nav {
         display: none;
         flex-direction: column;
         background: #1d2b53;
         width: 100%;
         position: absolute;
         top: 60px;
         left: 0;
         padding: 10px 20px;
       }

       nav.active {
         display: flex;
       }
     }

     .layout {
       display: flex;
       max-width: 1200px;
       margin: 40px auto;
       gap: 20px;
       padding: 0 20px;
       flex-wrap: wrap;
     }

     .sidebar {
       width: 100%;
       max-width: 250px;
       background: #f4f6ff;
       border-radius: 10px;
       padding: 20px;
       box-shadow: 0 5px 12px rgba(0, 0, 0, 0.05);
     }

     .sidebar h3 {
       font-size: 1.1rem;
       margin-bottom: 15px;
       color: #1d2b53;
     }

     .category-list {
       list-style: none;
       padding: 0;
     }

     .category-list li {
       padding: 10px;
       margin-bottom: 8px;
       background: #fff;
       border: 1px solid #dcdcdc;
       border-radius: 6px;
       cursor: pointer;
       transition: background 0.3s ease;
     }

     .category-list li:hover {
       background: #e6ecff;
     }

     .category-list li.active {
       background: #1d2b53;
       color: white;
       font-weight: 600;
     }

     .container {
       flex: 1;
       min-width: 300px;
       background: #ffffff;
       border-radius: 15px;
       padding: 30px 20px;
       box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
       animation: fadeIn 0.8s ease-in;
     }

     .section-title {
       font-size: 1.4rem;
       font-weight: 600;
       color: #1d2b53;
       margin: 35px 0 15px;
       border-left: 5px solid #1d2b53;
       padding-left: 12px;
       position: relative;
     }

     .section-title::after {
       content: '';
       position: absolute;
       left: 12px;
       bottom: -5px;
       width: 40px;
       height: 3px;
       background: #1d2b53;
       transition: width 0.3s ease;
     }

     .section-title:hover::after {
       width: 100px;
     }

     .create-post {
       margin-top: 20px;
       padding: 20px;
       background: #f9fbff;
       border: 2px dashed #ccc;
       border-radius: 10px;
       text-align: center;
     }

     .create-post input,
     .create-post textarea {
       width: 100%;
       padding: 10px;
       margin-top: 10px;
       margin-bottom: 15px;
       border-radius: 6px;
       border: 1px solid #ddd;
       font-family: 'Poppins', sans-serif;
       font-size: 1rem;
     }

     .create-post button {
       padding: 10px 20px;
       background: #1d2b53;
       color: white;
       border: none;
       border-radius: 6px;
       cursor: pointer;
       font-size: 1rem;
     }

     .create-post button:hover {
       background: #162043;
     }

     .post {
       background: #f2f4ff;
       padding: 15px 20px;
       margin-top: 20px;
       border-radius: 10px;
       position: relative;
     }

     .post-title {
       font-weight: bold;
       margin-bottom: 8px;
     }

     .post-content {
       margin-bottom: 10px;
     }

     .post-actions {
       display: flex;
       gap: 10px;
       flex-wrap: wrap;
     }

     .post-actions button {
       background: #1d2b53;
       color: white;
       border: none;
       padding: 5px 12px;
       border-radius: 5px;
       cursor: pointer;
       font-size: 0.85rem;
     }

     .post-actions button:hover {
       background: #0f1a3a;
     }

     @keyframes fadeIn {
       from { opacity: 0; transform: translateY(20px); }
       to { opacity: 1; transform: translateY(0); }
     }

     /* Reaction Buttons */
     .reaction-buttons {
       display: flex;
       gap: 10px;
       margin-top: 10px;
     }
     .reaction-buttons button {
       background: transparent;
       border: none;
       font-size: 1.2rem;
       cursor: pointer;
       transition: transform 0.2s ease;
     }
     .reaction-buttons button:hover {
       transform: scale(1.2);
     }

     /* Edit Button */
     .edit-button {
       background-color: #f0f0f0;
       border: none;
       border-radius: 8px;
       padding: 5px 10px;
       cursor: pointer;
       font-size: 0.9rem;
       margin-top: 10px;
     }

     /* Modal Style */
     .modal {
       display: none;
       position: fixed;
       z-index: 1000;
       left: 0; top: 0;
       width: 100%; height: 100%;
       background: rgba(0,0,0,0.5);
       justify-content: center;
       align-items: center;
     }
     .modal-content {
       background: white;
       padding: 20px;
       border-radius: 15px;
       width: 90%;
       max-width: 500px;
       box-shadow: 0 5px 15px rgba(0,0,0,0.2);
     }
     .modal textarea {
       width: 100%;
       height: 150px;
       border-radius: 10px;
       padding: 10px;
       resize: vertical;
       font-size: 1rem;
     }
     .modal-buttons {
       display: flex;
       gap: 10px;
       justify-content: flex-end;
     }
     .modal-buttons button {
       padding: 8px 15px;
       border: none;
       border-radius: 6px;
       font-size: 1rem;
       cursor: pointer;
     }
     .modal-buttons .save-btn {
       background-color: #28a745;
       color: white;
     }
     .modal-buttons .cancel-btn {
       background-color: #dc3545;
       color: white;
     }

   </style>
</head>
<body>

<header>
   <div class="logo">
     <img src="assets/profile.jpg" alt="Profile Image">
     <span>Bryan Gutierrez Ablao</span>
   </div>
   <nav>
     <a href="#">Home</a>
     <a href="#">About</a>
     <a href="#">Life Update</a>
     <a href="#">Contact</a>
   </nav>
   <div class="hamburger" onclick="toggleMenu()">&#9776;</div>
</header>

<div class="layout">
   <div class="sidebar">
     <h3>Categories</h3>
     <ul class="category-list">
       <li class="category-item" data-category="general">General</li>
       <li class="category-item" data-category="work">Work</li>
       <li class="category-item" data-category="family">Family</li>
     </ul>
   </div>

   <div class="container">
     <h1>Life Updates</h1>
     <div class="create-post">
       <textarea placeholder="What's new?" id="postContent" rows="4"></textarea>
       <button onclick="createPost()">Post</button>
     </div>

     <div id="postContainer">
       <!-- Posts will appear here -->
     </div>
   </div>
</div>

<!-- Modal for editing post -->
<div id="editModal" class="modal">
   <div class="modal-content">
     <textarea id="editText"></textarea>
     <div class="modal-buttons">
       <button class="save-btn" onclick="saveEdit()">Save</button>
       <button class="cancel-btn" onclick="closeModal()">Cancel</button>
     </div>
   </div>
</div>

<script>
   // Firebase config and initialization
   const firebaseConfig = {
     apiKey: "AIzaSyAV8ID37lD9x9tUWDB9eOSe41LZ8LT6EQg",
     authDomain: "bryan-g-ablao.firebaseapp.com",
     projectId: "bryan-g-ablao",
     storageBucket: "bryan-g-ablao.firebasestorage.app",
     messagingSenderId: "735385650124",
     appId: "1:735385650124:web:fc9fc5bc38a06359bd5369"
   };

   const app = firebase.initializeApp(firebaseConfig);
   const db = firebase.firestore();
   const auth = firebase.auth();

   // Toggle hamburger menu on small screens
   function toggleMenu() {
     document.querySelector('nav').classList.toggle('active');
   }

   let currentPostId = null;

   // Create Post Function
   function createPost() {
     const postContent = document.getElementById('postContent').value;
     const category = document.querySelector('.category-item.active')?.dataset.category || 'general';

     if (!postContent) {
       alert('Please enter some content to post.');
       return;
     }

     const post = {
       content: postContent,
       category: category,
       createdAt: firebase.firestore.FieldValue.serverTimestamp()
     };

     // Save post to Firestore
     db.collection('posts').add(post).then(() => {
       document.getElementById('postContent').value = ''; // Clear text area
       alert('Post created successfully!');
     }).catch((error) => {
       console.error('Error creating post:', error);
     });
   }

   // Fetch Posts from Firestore
   function loadPosts() {
     db.collection('posts').orderBy('createdAt', 'desc').get().then(querySnapshot => {
       const postsContainer = document.getElementById('postContainer');
       postsContainer.innerHTML = ''; // Clear the container before adding new posts

       querySnapshot.forEach(doc => {
         const post = doc.data();
         const postElement = document.createElement('div');
         postElement.classList.add('post');
         postElement.setAttribute('data-id', doc.id);
         postElement.innerHTML = `
           <div class="post-title">${post.content}</div>
           <div class="post-actions">
             <button class="edit-button" onclick="editPost('${doc.id}')">Edit</button>
             <button class="delete-button" onclick="deletePost('${doc.id}')">Delete</button>
           </div>
           <div class="reaction-buttons">
             <button>👍</button>
             <button>❤️</button>
             <button>😢</button>
           </div>
         `;
         postsContainer.appendChild(postElement);
       });
     });
   }

   // Edit Post
   function editPost(postId) {
     currentPostId = postId;
     const postElement = document.querySelector(`[data-id="${postId}"]`);
     const postContent = postElement.querySelector('.post-title').textContent;
     
     // Show the modal with the post content
     document.getElementById('editText').value = postContent;
     document.getElementById('editModal').style.display = 'flex';
   }

   // Save Edited Post
   function saveEdit() {
     const editedContent = document.getElementById('editText').value;

     if (editedContent === '') {
       alert('Please enter some content to save.');
       return;
     }

     db.collection('posts').doc(currentPostId).update({
       content: editedContent
     }).then(() => {
       closeModal();
       loadPosts();
     }).catch((error) => {
       console.error('Error updating post:', error);
     });
   }

   // Close Modal
   function closeModal() {
     document.getElementById('editModal').style.display = 'none';
     currentPostId = null;
   }

   // Delete Post
   function deletePost(postId) {
     db.collection('posts').doc(postId).delete().then(() => {
       loadPosts();
     }).catch((error) => {
       console.error('Error deleting post:', error);
     });
   }

   // Initialize and load posts on page load
   window.onload = function() {
     loadPosts();
   };
</script>

</body>
</html>
